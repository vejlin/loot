<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="javascripts/Tables.js"></script>
	<script type="text/javascript" src="javascripts/Tables1.js"></script>
	<script type="text/javascript" src="javascripts/Tables2.js"></script>
	<script type="text/javascript" src="javascripts/Tables3.js"></script>
	<script type="text/javascript" src="javascripts/Tables4.js"></script>
	<script type="text/javascript" src="javascripts/Tables5.js"></script>
	<script type="text/javascript" src="javascripts/Tables6.js"></script>
	<style type="text/css" media="screen">
    body {
      font: 12pt "Verdana";
    }
    header {
      font-size: 9pt;
      text-align: center;
    }
    form {
      border: 1px gray solid;
      padding: 0;
    }
    form div > * {
      padding-left: 2em;
      padding-right: 2em;
    }
    #output {
      font: 12pt "Monarco", "Courier New";
      color: gray;
      background-color: #efefef;
      display: inline-block;
      width: 100%;
    }
    #output p:first-child {
      color: black;
      font-weight: bold;
    }
	</style>
  <script>
    function loot(type) {
      var selectedScenario = scenario();
      var output = document.getElementById("output");
      var lootedTreasure = treasure(type,scenario);
      var treasureParts = breakTreasureIntoParts(lootedTreasure);

      var toHtml = function(str) { return elm("div", [txt(str)]); }
      var line = elm("p", treasureParts.map(toHtml));

      output.insertBefore(line(), output.firstChild);
    }

    function scenario(optionName) {
      var e = document.getElementById('scenario');
      return e.options[e.selectedIndex].value;
    }

    function breakTreasureIntoParts(t) {
      var item = t.magicItem;
      var parts = ["Money: " + t.money];

      if (item) {
        parts.push("Type: " + item.type);
        parts.push("Price: " + item.price);
        if (item.subType) {
          parts.push("SubType: " + item.subType);
        }
        if (item.description) {
          parts.push("Description: " + item.description);
        }
      }

      return parts;
    }

    var txt = function(text) {
      return function txt() {
        return document.createTextNode(text);
      }
    }
    
    var elm = function(tag, children) {
      return function elm() {
        var element = document.createElement(tag);
        children.forEach(function(child) {
          var childElm = child();
          element.appendChild(childElm);
        });
        return element;
      }
    }

    function clearOutput() {
      document.getElementById('output').innerHTML = '';
    }
  </script>
</head>

<body>
  <header>
    <img src="images/SW_Fan_Small.gif"><br>
    <p><strong>
      “This game references the Savage Worlds game system, available from Pinnacle Entertainment Group at
      <a href="http:\\www.peginc.com" target="_new">www.peginc.com</a>.<br>
      Savage Worlds and all associated logos and trademarks are copyrights of Pinnacle Entertainment Group. Used with permission.<br>
      Pinnacle makes no representation or warranty as to the quality, viability, or suitability for purpose of this product.”
    </strong></p>
  </header>

  <form>
    <div>
      <h3>
        Choose type of treasure
        <select id="scenario">
          <option value="1">Standard fantasy</option>
          <option value="2">Blackpowder fantasy</option>
        </select>
      </h3>

      <p>
        <button type="button" onclick="loot(1)">Meager</button>
        <button type="button" onclick="loot(2)">Worthwhile</button>
        <button type="button" onclick="loot(3)">Rich</button>
        <button type="button" onclick="loot(4)">Treasure Trove</button>
        &bull;
        <button type="button" onclick="clearOutput()">Clear</button>
      </p>
    </div>

    <div id="output"></div>
  </form>
</body>
</html>
